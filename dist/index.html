<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CrowCrow</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>

<body class="bg-dark text-light p-3">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-md-12">
        <div class="center-title text-center">
          <h5 class="mb-2">Parametric Articulatory Voice Synth</h5>
        </div>

        <div class="row justify-content-center align-items-start">
          <!-- 1. Leftmost Column: Start Synth + Phoneme Buttons -->
          <div class="d-flex flex-column align-items-center text-light mb-3 mb-md-0 flex-fill" style="min-width:140px;">
            <div class="mb-2 w-100">
              <button id="startButton" class="btn btn-secondary btn-sm w-100 py-1">Start Synth</button>
            </div>
            <!-- Vowels -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Vowels</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="a" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/a/</button>
              <button id="i" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/i/</button>
              <button id="u" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/u/</button>
            </div>
            <!-- Plosives -->
            <!-- Plosives -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Plosives</div>
            </div>
            <div class="mb-1 w-100 d-flex justify-content-between">
              <button id="p" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/p/</button>
              <button id="t" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/t/</button>
              <button id="d" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/d/</button>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="k" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/k/</button>
              <button id="b" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/b/</button>
              <button id="g" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/g/</button>
            </div>
            <!-- Nasals -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Nasals</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="m" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/m/</button>
              <button id="n" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/n/</button>
              <button id="ng" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ŋ/</button>
            </div>
            <!-- Approximants -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Approximants</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <!-- <button id="l" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/l/</button> -->
              <button id="r" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ɹ/</button>
              <button id="j" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/j/</button>
              <button id="w" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/w/</button>
            </div>
            <!-- Fricatives -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Fricatives</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="f" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/f/</button>
              <button id="v" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/v/</button>
              <button id="s" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/s/</button>
              <button id="z" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/z/</button>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="sh" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ʃ/</button>
              <button id="zh" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ʒ/</button>
              <button id="h" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/h/</button>
              <button id="ɦ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ɦ/</button>
            </div>

            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Specials</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="ʔ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ʔ/</button>
            </div>
            <!-- Affricates -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Affricates</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="tʃ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/tʃ/</button>
              <button id="dʒ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/dʒ/</button>
              <button id="ts" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ts/</button>
              <button id="dz" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/dz/</button>
            </div>
            <!-- Laterals -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Laterals</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="l" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/l/</button>              
              <button id="ɬ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ɬ/</button>
              <button id="ɮ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ɮ/</button>
            </div>
            <!-- Clicks -->
            <div class="w-100 text-center">
              <div class="small text-secondary mb-1">Clicks</div>
            </div>
            <div class="mb-2 w-100 d-flex justify-content-between">
              <button id="ǀ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ǀ/</button>
              <button id="ǃ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ǃ/</button>
              <button id="ǂ" class="btn btn-outline-light btn-sm flex-fill mx-1 py-1">/ǂ/</button>
              <!-- Lateral click (requires tract asymmetry): -->
              <button id="ǁ" class="btn btn-outline-secondary btn-sm flex-fill mx-1 py-1" disabled>/ǁ/</button>
            </div>  

          </div>

          <!-- 2. Subglottal & Glottis Column -->
          <div class="d-flex flex-column align-items-center text-light mb-3 mb-md-0 flex-fill" style="min-width:180px;">

            
            <!-- Subglottal Section -->
            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="fw-bold text-uppercase text-center small mb-0">Subglottal</div>
              <div class="text-center text-secondary small mb-1">Generates intensity & loudness</div>
              <div class="slider-block mt-1 mb-1">
                <div class="slider-label text-center small">Breath Cycle Rate</div>
                <input type="range" class="form-range" min="0.05" max="1.0" step="0.01" value="0.2"
                  id="breathCycleRateSlider" style="height:1.2rem;">
                <div class="slider-desc text-secondary text-center small">Breathing cycle rate (Hz)</div>
              </div>
              <div class="slider-block mb-1">
                <div class="slider-label text-center small">Effort</div>
                <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.8" id="effortSlider"
                  style="height:1.2rem;">
                <div class="slider-desc text-secondary text-center small">Subglottal effort (0–1)</div>
              </div>
            </div>
            <!-- Arrow Down -->
            <div class="text-center w-100 mb-1" style="font-size: 1.1rem; line-height:1;">↓</div>
            <!-- Glottis Section -->
            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="fw-bold text-uppercase text-center small mb-0">Glottis</div>
              <div class="d-flex justify-content-center align-items-center my-2"><span
                  class="small text-secondary">Voiced</span>
                <span id="voiced-indicator" style="
                  display:inline-block;
                  width:10px;
                  height:10px;
                  border-radius:50%;
                  background:rgb(255, 124, 124);                
                  margin-left:8px;
                  transition:background 0.2s;
                "></span>
              </div>
              <div class="text-center text-secondary small mb-1">Voicing source + noise input</div>
              <div class="slider-block mt-1 mb-1">
                <div class="slider-label text-center small">Frequency</div>
                <input type="range" class="form-range" min="50" max="2000" value="440" id="frequencySlider"
                  style="height:1.2rem;">
                <div class="slider-desc text-secondary text-center small">Glottal pitch (Hz)</div>
              </div>
              <div class="slider-block mb-1">
                <div class="slider-label text-center small">Tenseness</div>
                <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.6" id="tensenessSlider"
                  style="height:1.2rem;">
                <div class="slider-desc text-secondary text-center small">Glottal tension (0–1)</div>
              </div>
              <div class="text-center text-secondary small mt-1">+ Noise input</div>
            </div>
            
            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="slider-label text-center small mb-1">Chestiness</div>
              <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="chestinessSlider"
                style="height:1.2rem;">
              <div class="slider-desc text-secondary text-center small">
                Subglottal resonance (adds “body”/“chest” to the voice)
              </div>
            </div>



            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="slider-label text-center small mb-1">Tract Length</div>
              <input type="range" class="form-range" min="0.7" max="1.2" step="0.01" value="1.0" id="tractLengthSlider"
                style="height:1.2rem;">
              <div class="slider-desc text-secondary text-center small">Simulates age/gender/body size (0.7–1.2)</div>
            </div>



          </div>


          <!-- 3. Tract Shape, Tract Visualizer, Master Gain Column -->
          <div class="d-flex flex-column align-items-center text-light flex-fill" style="min-width:180px;">
            <!-- Tract Sliders -->
            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="row g-1">
                <div class="col-12">
                  <div class="slider-label text-center small mb-1">Tract Shape Controls</div>
                </div>
                <!-- 8 sliders, each with a label -->
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider0" class="small">Zone 1</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider0"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider1" class="small">Zone 2</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider1"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider2" class="small">Zone 3</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider2"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider3" class="small">Zone 4</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider3"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider4" class="small">Zone 5</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider4"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider5" class="small">Zone 6</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider5"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider6" class="small">Zone 7</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider6"
                    style="height:1.2rem;">
                </div>
                <div class="col-2 d-flex flex-column align-items-center">
                  <label for="tractSlider7" class="small">Zone 8</label>
                  <input type="range" class="form-range" min="0" max="1" step="0.01" value="0.5" id="tractSlider7"
                    style="height:1.2rem;">
                </div>
              </div>
            </div>
            <!-- Tract Visualizer Block -->
            <div class="p-1 bg-dark rounded border border-secondary shadow-sm w-100 mt-2">
              <div class="fw-bold text-uppercase text-center small mb-1">Tract</div>
              <canvas id="tract-visualizer" class="border rounded w-100"
                style="display:block; width:100%; height:150px; background:#222; max-width:220px;"></canvas>
            </div>
            <!-- Arrow Down -->
            <div class="text-center w-100 mb-1" style="font-size: 1.1rem; line-height:1;">↓</div>
            <!-- Master Gain Slider -->
            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="slider-label text-center small mb-1">Master Gain</div>
              <input type="range" class="form-range" min="0" max="2" step="0.01" value="1" id="masterGainSlider"
                style="height:1.2rem;">
              <div class="slider-desc text-secondary text-center small">Output volume (0–2)</div>
            </div>
          </div>

          <!-- 4. Oscilloscope & Parameters Column -->
          <div class="d-flex flex-column align-items-center text-light flex-fill" style="min-width:180px;">
            <!-- Arrow Down -->
            <div class="text-center w-100 mb-1" style="font-size: 1.1rem; line-height:1;">↓</div>

            <div class="p-1 mb-2 bg-dark rounded border border-secondary shadow-sm w-100">
              <div class="slider-label text-center small mb-1">Glide Duration</div>
              <input type="range" class="form-range" min="0" max="0.2" step="0.005" value="0.04" id="glideSlider"
                style="height:1.2rem;">
              <div class="slider-desc text-secondary text-center small">
                (0–200 ms)
              </div>
            </div>

            <!-- Oscilloscope Block -->
            <div class="p-1 bg-dark rounded border border-secondary shadow-sm w-100 mt-2">
              <div class="fw-bold text-uppercase text-center small mb-1">Oscilloscope</div>
              <canvas id="oscilloscope" class="oscilloscope-canvas border rounded w-100"
                style="display:block; width:100%; height:150px; background:#222; max-width:220px;"></canvas>
            </div>
            <!-- Parameter Box -->
            <div class="p-1 bg-dark rounded border border-secondary shadow-sm w-100 mt-2">
              <div class="fw-bold text-uppercase text-center small mb-1">Parameters</div>
              <ul id="parameter-list" class="list-unstyled mb-0 small text-light" style="font-size:0.95em;">
                <!-- Parameters will be populated by JS -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/bundle.js"></script>
  </div>
</body>

</html>